<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Advanced Web Developement</title>

        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
        <link href="../resources/css/styles.css" rel="stylesheet" />

        <style>
            .indexContent{
                margin-top:7%;
                height:auto;
            }

            
            body{
                margin-top:20vh;
                text-align: center;
            }
        </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg bg-secondary text-uppercase fixed-top" id="mainNav">
        <div class="container">
            <a class="navbar-brand" href="/">Adv Web</a>
            <button class="navbar-toggler text-uppercase font-weight-bold bg-primary text-white rounded" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                Menu
                <i class="fas fa-bars"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href="/">Add Employee</a></li>
                    <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded" href="/employeeList">Look At Employees</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <section class="indexContent mb-0">
    <div id="container">
        
        <h1>Enter your Favorite food</h1>

        <form action="/updateEmployee" method="post">


            <input type="text" id="employeeID" name="_id"  readonly hidden>


            <span id="err" style="color:red;"></span>
            <br>
            <br>
            <label for="employeeFirstName">Enter your FirstName here:</label>
            <br>
            <input type="text" name="employeeFirstName" id="employeeFirstNameTxt" placeholder="">


            <br>
            <br>
            <label for="employeeLastName">Enter your LastName here:</label>
            <br>
            <input type="text" name="employeeLastName" id="employeeLastNameTxt" placeholder="">


            <br>
            <br>
            <label for="employeeDepartment">Enter your DepartmentName here:</label>
            <br>
            <!-- <input type="text" name="employeeDepartment" id="employeeDepartmentTxt" placeholder=""> -->

            <label for="cars">Choose a dep:</label>
            <select id="employeeDepartmentTxt" name="employeeDepartment">
                <option value="Accounting">Accounting</option>
                <option value="RISC">RISC</option>
                <option value="Automation Support">Automation Support</option>
                <option value="AIO">AIO</option>
            </select>


            <br>
            <br>
            <label for="employeeStartDate">Enter your StartDate here:</label>
            <br>
            <input type="date" name="employeeStartDate" id="employeeStartDateTxt" placeholder="">


            <br>
            <br>
            <label for="employeeJobTitle">Enter your Title here:</label>
            <br>
            <input type="text" name="employeeJobTitle" id="employeeJobTitleTxt" placeholder="">


            <br>
            <br>
            <label for="employeeSalary">Enter your Salary here:</label>
            <br>
            <input type="text" name="employeeSalary" id="employeeSalaryTxt" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*?)\..*/g, '$1');" />

            <br>
            <button type="submit">Submit Food to Database</button>


        </form>

    </div>
    <script>
        const allEncryptedVariables = window.location.search;
       
        const decryptedURLVariables = atob(allEncryptedVariables.substring(1))
        
        const parsedURLVariablesArray = new URLSearchParams(decryptedURLVariables);

        let _id = parsedURLVariablesArray.get("_id");
        let employeeFirstName = parsedURLVariablesArray.get("employeeFirstName")
        let employeeLastName = parsedURLVariablesArray.get("employeeLastName")
        let employeeDepartment = parsedURLVariablesArray.get("employeeDepartment")
        let employeeStartDate = parsedURLVariablesArray.get("employeeStartDate")
        let employeeJobTitle = parsedURLVariablesArray.get("employeeJobTitle")
        let employeeSalary = parsedURLVariablesArray.get("employeeSalary")


        let idTextBox = document.querySelector("#employeeID")
        let employeeFirstNameTextBox = document.querySelector("#employeeFirstNameTxt")
        let employeeLastNameTextBox = document.querySelector("#employeeLastNameTxt")
        let employeeDepartmentTextBox = document.querySelector("#employeeDepartmentTxt")
        let employeeStartDateTextBox = document.querySelector("#employeeStartDateTxt")
        let employeeJobTitleTextBox = document.querySelector("#employeeJobTitleTxt")
        let employeeSalaryTextBox = document.querySelector("#employeeSalaryTxt")


        console.log("Employee Date for Georgr: " + employeeStartDate.substring(0,10))

        //dateStr.toLocaleDateString()
        // "05/08/2020"

   
       // console.log("Date time value: " + dateStr.toLocaleDateString())

        idTextBox.value = _id
        employeeFirstNameTextBox.value = employeeFirstName
        employeeLastNameTextBox.value = employeeLastName
        employeeDepartmentTextBox.value = employeeDepartment
        employeeStartDateTextBox.value = employeeStartDate.substring(0,10)

 

        console.log("Parsed string here " + employeeJobTitle)
        employeeJobTitleTextBox.value = employeeJobTitle
        employeeSalaryTextBox.value = employeeSalary

    
    </script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="../resources/js/scripts.js"></script>
<script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
</section>
</body>
</html>